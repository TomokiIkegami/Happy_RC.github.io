<!DOCTYPE html>
<html lang="ja"><head>
  <title>
     Bluetooth モジュールでRCサーボ・ESCを制御したい [第4回-操作性の向上] -  Happy RC Blog !
  </title>
  <meta name="theme-color" content="#a3001b" />
  <meta charset="utf-8" />
  <meta content="width=device-width, initial-scale=1.0" name="viewport" />
  <meta name="description" content="ラジコンが楽しくなるような工作やレポートを掲載したいと思います！ラジコン以外にもやってみて苦労したことや、面白かったことについても記録していく予定です！" />
  <meta name="author" content="Tomoki Ikegami" />

  <link rel="stylesheet" href="/Happy_RC.github.io/css/main.css" />
  <link rel="preconnect" href="https://fonts.gstatic.com" />
  <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;500&family=Ubuntu+Mono&display=swap" rel="stylesheet">
  <link
    rel="stylesheet"
    href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.0/font/bootstrap-icons.css"
  />
</head>
<body>
    
    <header class="regular-page-header shadow round-corner">
  <div
    style="
      display: flex;
      justify-content: space-between;
      width: 98%;
      margin-bottom: 0.5em;
    "
  >
    <a class="primary-icon" href="/Happy_RC.github.io/" aria-label="home page">
      <i class="bi bi-house-fill"></i>
    </a>
    
  </div>
  <div class="page-title-and-info" style="text-align: center">
    <h1 class="page-title" >
      Bluetooth モジュールでRCサーボ・ESCを制御したい [第4回-操作性の向上]
    </h1>
    
    <p class="document-date">
      2022-08-20 &middot; Tomoki Ikegami
    </p>
    
    <p class="document-description">"文字打ち込んで操縦するのはさすがに...（笑笑）"</p>
     
  </div>
</header>

    
    <main class="card shadow round-corner">
<h1 id="-目次-----omit-in-toc---">～ 目次 ～ <!-- omit in toc --></h1>
<ul>
<li><a href="#1-%E4%BB%8A%E5%9B%9E%E3%82%84%E3%82%8A%E3%81%9F%E3%81%84%E3%81%93%E3%81%A8">1. 今回やりたいこと</a></li>
<li><a href="#2-%E5%AE%9F%E9%9A%9B%E3%81%AB%E3%82%84%E3%81%A3%E3%81%9F%E6%94%B9%E8%89%AF%E3%81%AE%E6%B5%81%E3%82%8C">2. 実際にやった改良の流れ</a></li>
<li><a href="#3-%E6%94%B9%E8%89%AF%E3%81%AE%E9%81%8E%E7%A8%8B">3. 改良の過程</a>
<ul>
<li><a href="#31--ver2-%E3%81%A8%E3%82%8A%E3%81%82%E3%81%88%E3%81%9A%E6%96%87%E5%AD%97%E6%89%93%E3%81%A1%E8%BE%BC%E3%81%BF%E3%81%AF%E3%82%84%E3%82%81%E3%82%88%E3%81%86">3.1. ◆ ver.2 ～とりあえず文字打ち込みはやめよう～</a>
<ul>
<li><a href="#311-%E3%82%B9%E3%83%9E%E3%83%9B%E3%82%A2%E3%83%97%E3%83%AA">3.1.1. スマホアプリ</a></li>
<li><a href="#312-%E3%83%9E%E3%82%A4%E3%82%B3%E3%83%B3%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%A0">3.1.2. マイコンプログラム</a></li>
</ul>
</li>
<li><a href="#32--ver3-%E7%89%87%E6%89%8B%E3%81%A7%E6%93%8D%E4%BD%9C%E3%81%97%E3%81%9F%E3%81%84%E3%81%AA">3.2. ◆ ver.3 ～片手で操作したいな～</a>
<ul>
<li><a href="#321-%E3%82%B9%E3%83%9E%E3%83%9B%E3%82%A2%E3%83%97%E3%83%AA">3.2.1. スマホアプリ</a></li>
<li><a href="#322-%E3%83%9E%E3%82%A4%E3%82%B3%E3%83%B3%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%A0">3.2.2. マイコンプログラム</a></li>
</ul>
</li>
<li><a href="#33--ver4-ver3%E3%81%AE%E6%94%B9%E8%89%AF%E7%89%88">3.3. ◆ ver.4 ～ver.3の改良版～</a>
<ul>
<li><a href="#331-%E3%82%B9%E3%83%9E%E3%83%9B%E3%82%A2%E3%83%97%E3%83%AA">3.3.1. スマホアプリ</a></li>
<li><a href="#332-%E3%83%9E%E3%82%A4%E3%82%B3%E3%83%B3%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%A0">3.3.2. マイコンプログラム</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#4-%E8%AA%B2%E9%A1%8C%E7%82%B9%E3%81%A8%E4%BB%8A%E5%BE%8C%E3%81%AB%E5%90%91%E3%81%91%E3%81%A6">4. 課題点と今後に向けて</a></li>
<li><a href="#5-%E3%82%B5%E3%83%B3%E3%83%97%E3%83%AB%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB">5. サンプルファイル</a></li>
<li><a href="#6-%E5%8F%82%E8%80%83%E8%B3%87%E6%96%99">6. 参考資料</a></li>
</ul>
<hr>
<h1 id="1-今回やりたいこと">1. 今回やりたいこと</h1>
<p>　<a href="https://tomokiikegami.github.io/Happy_RC.github.io/2022/03/15/">前回</a>は MIT App Inventor を使ってラジコン操縦アプリの試作を行いました。</p>
<p>　前回作成したスマホアプリは、スマホキーボードから文字を打ち込んで（前進なら&quot;F&quot;、右折なら&quot;R&quot;、停止なら&quot;N&quot;など）操縦するというものでした（笑）。</p>
<p>　実際これでラジコンを操縦してみると、全然操縦できませんでした！</p>
<p>　今回は<strong>コントローラー側のアプリ</strong>と<strong>マイコン側のプログラム</strong>（ラジコンに搭載している）を改良します(^^)/</p>
<p>　実験に使った装置は<a href="https://tomokiikegami.github.io/Happy_RC.github.io/2022/03/15/">前回</a>と全く同じになります。</p>
<p>　下の画像は今の実験車を撮影したもので、色々なものがごちゃごちゃと積まれています。（笑）</p>
  <div align="center">
  <figure><img src="my_bluetooth_rc_car.jpg"
         alt="実験車の様子"/>
</figure>

  </div>
  <div style="text-align: center;">
  ☝　実験車の様子
  </div>
<h1 id="2-実際にやった改良の流れ">2. 実際にやった改良の流れ</h1>
<p>　前回までのスマホアプリとマイコンプログラムを記念すべき（？）ver.1 として、改良を進めていきます。</p>
<p>　改良していく度に、ver.2→3→4 としました。ソフトのリリースノートみたいな感じでメモっていきます。（そんなガチなものではございませんww）</p>
<p>　作ったアプリのデータは最後にまとめて載せておきます。</p>
<h1 id="3-改良の過程">3. 改良の過程</h1>
<h2 id="31--ver2-とりあえず文字打ち込みはやめよう">3.1. ◆ ver.2 ～とりあえず文字打ち込みはやめよう～</h2>
<p>　文字を打ち込んで操縦はさすがに難しすぎるので、ボタンで操作するようにアプリを改良します。</p>
<p>　改良するのはアプリ側だけで、マイコン側のプログラムはそのままです。</p>
<h3 id="311-スマホアプリ">3.1.1. スマホアプリ</h3>
<p>　かなり操縦はしずらいですが、ver.1よりはマシに感じました。</p>
<p>　スロットル（アクセル）とステア（ハンドル）の信号をごちゃ混ぜで送っている割には、まあまあ動きました（なんでだろう）</p>
  <div align="center">
  <figure><img src="UI2.png"
         alt="アプリ外観（デザイン編集タブ）"/>
</figure>

  </div>
  <div style="text-align: center;">
  ☝　アプリ外観（デザイン編集タブ）
  </div>
  <div align="center">
  <figure><img src="blocks2.png"
         alt="アプリの中身（ブロック編集タブ）"/>
</figure>

  </div>
  <div style="text-align: center;">
  ☝　アプリの中身（ブロック編集タブ）
  </div>
<h3 id="312-マイコンプログラム">3.1.2. マイコンプログラム</h3>
<p>　ver.1と全く同じです。
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#960050;background-color:#1e0010">#</span>include<span style="color:#f92672">&lt;</span>SoftwareSerial<span style="color:#f92672">.</span><span style="color:#a6e22e">h</span><span style="color:#f92672">&gt;</span>  <span style="color:#75715e">//Bluetoothの無線通信に使用
</span><span style="color:#75715e"></span><span style="color:#960050;background-color:#1e0010">#</span>include <span style="color:#f92672">&lt;</span>VarSpeedServo<span style="color:#f92672">.</span><span style="color:#a6e22e">h</span><span style="color:#f92672">&gt;</span>  <span style="color:#75715e">//サーボモータの制御に使用
</span><span style="color:#75715e"></span>VarSpeedServo myservo<span style="color:#f92672">;</span>    <span style="color:#75715e">// create servo object to control a servo
</span><span style="color:#75715e"></span>VarSpeedServo myesc<span style="color:#f92672">;</span>    <span style="color:#75715e">// create servo object to control a esc
</span><span style="color:#75715e"></span>
<span style="color:#75715e">/* ステアリングの設定 */</span>
<span style="color:#66d9ef">int</span> mov_speed_ST <span style="color:#f92672">=</span> 30<span style="color:#f92672">;</span> <span style="color:#75715e">//ステア移動速度
</span><span style="color:#75715e"></span><span style="color:#66d9ef">int</span> center_pos <span style="color:#f92672">=</span> 90<span style="color:#f92672">;</span> <span style="color:#75715e">//ステア中心位置 [サーボモータの中心位置 (90°)]
</span><span style="color:#75715e"></span><span style="color:#66d9ef">int</span> left_DR <span style="color:#f92672">=</span> 20<span style="color:#f92672">;</span> <span style="color:#75715e">//左位置 [中心位置より反時計回りに20°回転した位置]
</span><span style="color:#75715e"></span><span style="color:#66d9ef">int</span> right_DR <span style="color:#f92672">=</span> 25<span style="color:#f92672">;</span> <span style="color:#75715e">//右位置 [中心位置より時計回りに25°回転した位置]
</span><span style="color:#75715e"></span><span style="color:#66d9ef">int</span> left_max <span style="color:#f92672">=</span> center_pos <span style="color:#f92672">-</span> left_DR<span style="color:#f92672">;</span> <span style="color:#75715e">//左の最大切れ角
</span><span style="color:#75715e"></span><span style="color:#66d9ef">int</span> right_max <span style="color:#f92672">=</span> center_pos <span style="color:#f92672">+</span> right_DR<span style="color:#f92672">;</span> <span style="color:#75715e">//右の最大切れ角
</span><span style="color:#75715e"></span>
<span style="color:#75715e">/* スロットルの設定 */</span>
<span style="color:#66d9ef">int</span> mov_speed_TH <span style="color:#f92672">=</span> 5<span style="color:#f92672">;</span> <span style="color:#75715e">//スロットル移動速度
</span><span style="color:#75715e"></span><span style="color:#66d9ef">int</span> brake_speed <span style="color:#f92672">=</span> 100<span style="color:#f92672">;</span> <span style="color:#75715e">//ブレーキ速度
</span><span style="color:#75715e"></span><span style="color:#66d9ef">int</span> neutral_pos <span style="color:#f92672">=</span> 91<span style="color:#f92672">;</span> <span style="color:#75715e">//中立位置 [スロットルの中立位置 (90) ※ESCの設定によってずれがあるので、前後に走行しないよう値を調整する。ESC側を90で中立になるよう設定してもよい。]
</span><span style="color:#75715e"></span><span style="color:#66d9ef">int</span> forward_DR <span style="color:#f92672">=</span> 20<span style="color:#f92672">;</span> <span style="color:#75715e">//前進位置
</span><span style="color:#75715e"></span><span style="color:#66d9ef">int</span> backward_DR <span style="color:#f92672">=</span> 20<span style="color:#f92672">;</span> <span style="color:#75715e">//バック位置
</span><span style="color:#75715e"></span><span style="color:#66d9ef">int</span> forward_max <span style="color:#f92672">=</span> neutral_pos <span style="color:#f92672">+</span> forward_DR<span style="color:#f92672">;</span> <span style="color:#75715e">//前進の最大位置
</span><span style="color:#75715e"></span><span style="color:#66d9ef">int</span> backward_max <span style="color:#f92672">=</span> neutral_pos <span style="color:#f92672">-</span> backward_DR<span style="color:#f92672">;</span> <span style="color:#75715e">//バックの最大位置
</span><span style="color:#75715e"></span>
<span style="color:#75715e">//速度(mov_speed_ST,mov_speed_TH)は 1~255 の範囲で与える。（0にすると最大速度で移動）
</span><span style="color:#75715e">//スロットル、サーボモータの値(pos)の範囲は、 0≦ pos ≦180 で与える。
</span><span style="color:#75715e">//myservo.write 関数には回転角を絶対的な位置で与える。例) 90°から 45°反時計回りに動いてほしいときは、-45ではなく、45を関数に入力する。
</span><span style="color:#75715e"></span>

SoftwareSerial <span style="color:#a6e22e">Bluetooth</span><span style="color:#f92672">(</span>10<span style="color:#f92672">,</span> 11<span style="color:#f92672">);</span> <span style="color:#75715e">// Arduinoから見て10ピンがRX（受信）, 11ピンがTX（送信)になる。bluetoothモジュールのTXにはArduinoのRX(10)が、bluetoothモジュールのRXにはArduinoのTX(11)が接続されていれば良い。
</span><span style="color:#75715e"></span>
<span style="color:#66d9ef">void</span> <span style="color:#a6e22e">setup</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
  Bluetooth<span style="color:#f92672">.</span><span style="color:#a6e22e">begin</span><span style="color:#f92672">(</span>9600<span style="color:#f92672">);</span> <span style="color:#75715e">//シリアルポートを開いて、伝送速度を9600[bps] に設定
</span><span style="color:#75715e"></span>  Serial<span style="color:#f92672">.</span><span style="color:#a6e22e">begin</span><span style="color:#f92672">(</span>9600<span style="color:#f92672">);</span> <span style="color:#75715e">//シリアルモニタで確認用
</span><span style="color:#75715e"></span>  myservo<span style="color:#f92672">.</span><span style="color:#a6e22e">attach</span><span style="color:#f92672">(</span>9<span style="color:#f92672">);</span> <span style="color:#75715e">//サーボモータのPWM端子とArduinoの9番ピンを接続
</span><span style="color:#75715e"></span>  myesc<span style="color:#f92672">.</span><span style="color:#a6e22e">attach</span><span style="color:#f92672">(</span>6<span style="color:#f92672">);</span> <span style="color:#75715e">//ESCのPWM端子とArduinoの6番ピンを接続
</span><span style="color:#75715e"></span><span style="color:#f92672">}</span>

<span style="color:#66d9ef">void</span> <span style="color:#a6e22e">loop</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
  <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>Bluetooth<span style="color:#f92672">.</span><span style="color:#a6e22e">available</span><span style="color:#f92672">())</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">char</span> input <span style="color:#f92672">=</span> Bluetooth<span style="color:#f92672">.</span><span style="color:#a6e22e">read</span><span style="color:#f92672">();</span> <span style="color:#75715e">//受信したテキストを変数inputに保存
</span><span style="color:#75715e"></span>    Serial<span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>input<span style="color:#f92672">);</span> <span style="color:#75715e">//受信したテキストをシリアルモニタに表示
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>input <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;L&#39;</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
      myservo<span style="color:#f92672">.</span><span style="color:#a6e22e">write</span><span style="color:#f92672">(</span>left_max<span style="color:#f92672">,</span> mov_speed_ST<span style="color:#f92672">,</span> <span style="color:#66d9ef">true</span><span style="color:#f92672">);</span> <span style="color:#75715e">// ステアを左(Left)に切る
</span><span style="color:#75715e"></span>    <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>input <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;C&#39;</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
      myservo<span style="color:#f92672">.</span><span style="color:#a6e22e">write</span><span style="color:#f92672">(</span>center_pos<span style="color:#f92672">,</span> mov_speed_ST<span style="color:#f92672">,</span> <span style="color:#66d9ef">true</span><span style="color:#f92672">);</span> <span style="color:#75715e">// ステアを中心(Center)に
</span><span style="color:#75715e"></span>    <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>input <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;R&#39;</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
      myservo<span style="color:#f92672">.</span><span style="color:#a6e22e">write</span><span style="color:#f92672">(</span>right_max<span style="color:#f92672">,</span> mov_speed_ST<span style="color:#f92672">,</span> <span style="color:#66d9ef">true</span><span style="color:#f92672">);</span>  <span style="color:#75715e">//ステアを右(Right)に切る
</span><span style="color:#75715e"></span>    <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>input <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;F&#39;</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
      myesc<span style="color:#f92672">.</span><span style="color:#a6e22e">write</span><span style="color:#f92672">(</span>forward_max<span style="color:#f92672">,</span> mov_speed_TH<span style="color:#f92672">,</span> <span style="color:#66d9ef">true</span><span style="color:#f92672">);</span>  <span style="color:#75715e">//前進(Forward)
</span><span style="color:#75715e"></span>    <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>input <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;N&#39;</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
      myesc<span style="color:#f92672">.</span><span style="color:#a6e22e">write</span><span style="color:#f92672">(</span>neutral_pos<span style="color:#f92672">,</span> brake_speed<span style="color:#f92672">,</span> <span style="color:#66d9ef">true</span><span style="color:#f92672">);</span>  <span style="color:#75715e">//中立(Neutral)
</span><span style="color:#75715e"></span>    <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>input <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;B&#39;</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
      myesc<span style="color:#f92672">.</span><span style="color:#a6e22e">write</span><span style="color:#f92672">(</span>backward_max<span style="color:#f92672">,</span> mov_speed_TH<span style="color:#f92672">,</span> <span style="color:#66d9ef">true</span><span style="color:#f92672">);</span>  <span style="color:#75715e">//後退(Backward)
</span><span style="color:#75715e"></span>    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
    <span style="color:#f92672">}</span>
  <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span></code></pre></div></p>
<h2 id="32--ver3-片手で操作したいな">3.2. ◆ ver.3 ～片手で操作したいな～</h2>
<p>　スマホを使って、片手でラジコン操作したらカッコイイと思いました！（そうは思わないですかね&hellip;）</p>
<p>　そこで、前進、後進、左折、右折 ボタンを親指が届く範囲にまとめます。あと、前進しながら左折するなどの動作があるのでそのようなボタンも追加します。</p>
<p>　色々やってみましたが、正直あまり上手く動きませんでした。（トホホ&hellip;）</p>
<h3 id="321-スマホアプリ">3.2.1. スマホアプリ</h3>
<p>　アプリを作る前に、考えられる動作パターン（止まりながら左折、前進しながら右折など）を1つずつ書き出していきます。（地道な作業）</p>
<p>　全パターンを書き出したのが下のパラパラ漫画です。（速すぎて見えねぇよ&hellip;）</p>
  <div align="center">
  <figure><img src="full_function.gif"
         alt="考えられる全動作パターン"/>
</figure>

  </div>
  <div style="text-align: center;">
  ☝　考えられる全動作パターン
  </div>
<p>　上の画像では分かりずらいと思うので、1枚の画像に全動作パターンをまとめます。（下図参照）</p>
<p>　文字が小さくて読みずらいと思うので、必要に応じて拡大しながら見てください。それぞれのパターンに A~I のアルファベットを振りました。</p>
<p>　A~I の動きができれば、車は前後左右に動くことができます。いわゆる<strong>フルファンクション</strong>というやつです。（おもちゃ売り場とかで見たことありませんか？）</p>
<p>　停止と書いている部分は、実車で言うところのニュートラル（駆動していない状態）と考えたほうが良いかもしれません。ここでは、クローララジコン用ESCを使って実験しているので、ニュートラル状態になったとき自動的にブレーキがかかります。</p>
  <div align="center">
  <figure><img src="%e3%83%95%e3%83%ab%e3%83%95%e3%82%a1%e3%83%b3%e3%82%af%e3%82%b7%e3%83%a7%e3%83%b3%e3%81%ae%e5%85%a8%e3%83%91%e3%82%bf%e3%83%bc%e3%83%b3.svg"
         alt="考えられる全動作パターン"/>
</figure>

  </div>
  <div style="text-align: center;">
  ☝　考えられる全動作パターン
  </div>
<p>　この画像を参考にして作成したアプリは、下の画像のようになります。</p>
<p>　作ってから気づいたのですが、4つ角のボタンは全く意味がありません。機能の割当を忘れてました( ;∀;)</p>
<p>　大まかな動作原理としては、押されたボタンの組み合わせから A~I のアルファベットを生成し、マイコンに送る仕組みです。</p>
<p>　下のブロックでCH1はステアの操作、CH2はスロットルの操作になります。（CH1→0:中立,1:左ステア,-1:右ステア　CH2→0:中立,1:前進,-1:後進）</p>
<p>　ブロック一番下のタイマーは信号の送信に使っていて、100ms ごとにデータを送信しています。</p>
  <div align="center">
  <figure><img src="UI3.png"
         alt="アプリ外観（デザイン編集タブ）"/>
</figure>

  </div>
  <div style="text-align: center;">
  ☝　アプリ外観（デザイン編集タブ）
  </div>
  <div align="center">
  <figure><img src="blocks3.png"
         alt="アプリの中身（ブロック編集タブ）"/>
</figure>

  </div>
  <div style="text-align: center;">
  ☝　アプリの中身（ブロック編集タブ）
  </div>
<h3 id="322-マイコンプログラム">3.2.2. マイコンプログラム</h3>
<p>　入力された文字に応じて、動作を決めるという点はver.1,ver.2と同じです。</p>
<p>　入力信号に変化があったときだけラジコンを動かすように、flag, old_input という変数を追加しています。
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#960050;background-color:#1e0010">#</span>include<span style="color:#f92672">&lt;</span>SoftwareSerial<span style="color:#f92672">.</span><span style="color:#a6e22e">h</span><span style="color:#f92672">&gt;</span>  <span style="color:#75715e">//Bluetoothの無線通信に使用
</span><span style="color:#75715e"></span><span style="color:#960050;background-color:#1e0010">#</span>include <span style="color:#f92672">&lt;</span>VarSpeedServo<span style="color:#f92672">.</span><span style="color:#a6e22e">h</span><span style="color:#f92672">&gt;</span>  <span style="color:#75715e">//サーボモータの制御に使用
</span><span style="color:#75715e"></span>VarSpeedServo myservo<span style="color:#f92672">;</span>    <span style="color:#75715e">// create servo object to control a servo
</span><span style="color:#75715e"></span>VarSpeedServo myesc<span style="color:#f92672">;</span>    <span style="color:#75715e">// create servo object to control a esc
</span><span style="color:#75715e"></span>
<span style="color:#75715e">/* ステアリングの設定 */</span>
<span style="color:#66d9ef">int</span> mov_speed_ST <span style="color:#f92672">=</span> 30<span style="color:#f92672">;</span> <span style="color:#75715e">//ステア移動速度
</span><span style="color:#75715e"></span><span style="color:#66d9ef">int</span> center_pos <span style="color:#f92672">=</span> 90<span style="color:#f92672">;</span> <span style="color:#75715e">//ステア中心位置 [サーボモータの中心位置 (90°)]
</span><span style="color:#75715e"></span><span style="color:#66d9ef">int</span> left_DR <span style="color:#f92672">=</span> 20<span style="color:#f92672">;</span> <span style="color:#75715e">//左位置 [中心位置より反時計回りに20°回転した位置]
</span><span style="color:#75715e"></span><span style="color:#66d9ef">int</span> right_DR <span style="color:#f92672">=</span> 25<span style="color:#f92672">;</span> <span style="color:#75715e">//右位置 [中心位置より時計回りに25°回転した位置]
</span><span style="color:#75715e"></span><span style="color:#66d9ef">int</span> left_max <span style="color:#f92672">=</span> center_pos <span style="color:#f92672">-</span> left_DR<span style="color:#f92672">;</span> <span style="color:#75715e">//左の最大切れ角
</span><span style="color:#75715e"></span><span style="color:#66d9ef">int</span> right_max <span style="color:#f92672">=</span> center_pos <span style="color:#f92672">+</span> right_DR<span style="color:#f92672">;</span> <span style="color:#75715e">//右の最大切れ角
</span><span style="color:#75715e"></span>
<span style="color:#75715e">/* スロットルの設定 */</span>
<span style="color:#66d9ef">int</span> mov_speed_TH <span style="color:#f92672">=</span> 5<span style="color:#f92672">;</span> <span style="color:#75715e">//スロットル移動速度
</span><span style="color:#75715e"></span><span style="color:#66d9ef">int</span> brake_speed <span style="color:#f92672">=</span> 100<span style="color:#f92672">;</span> <span style="color:#75715e">//ブレーキ速度
</span><span style="color:#75715e"></span><span style="color:#66d9ef">int</span> neutral_pos <span style="color:#f92672">=</span> 91<span style="color:#f92672">;</span> <span style="color:#75715e">//中立位置 [スロットルの中立位置 (90) ※ESCの設定によってずれがあるので、前後に走行しないよう値を調整する。ESC側を90で中立になるよう設定してもよい。]
</span><span style="color:#75715e"></span><span style="color:#66d9ef">int</span> forward_DR <span style="color:#f92672">=</span> 20<span style="color:#f92672">;</span> <span style="color:#75715e">//前進位置
</span><span style="color:#75715e"></span><span style="color:#66d9ef">int</span> backward_DR <span style="color:#f92672">=</span> 20<span style="color:#f92672">;</span> <span style="color:#75715e">//バック位置
</span><span style="color:#75715e"></span><span style="color:#66d9ef">int</span> forward_max <span style="color:#f92672">=</span> neutral_pos <span style="color:#f92672">+</span> forward_DR<span style="color:#f92672">;</span> <span style="color:#75715e">//前進の最大位置
</span><span style="color:#75715e"></span><span style="color:#66d9ef">int</span> backward_max <span style="color:#f92672">=</span> neutral_pos <span style="color:#f92672">-</span> backward_DR<span style="color:#f92672">;</span> <span style="color:#75715e">//バックの最大位置
</span><span style="color:#75715e"></span>
<span style="color:#75715e">//速度(mov_speed_ST,mov_speed_TH)は 1~255 の範囲で与える。（0にすると最大速度で移動）
</span><span style="color:#75715e">//スロットル、サーボモータの値(pos)の範囲は、 0≦ pos ≦180 で与える。
</span><span style="color:#75715e">//myservo.write 関数には回転角を絶対的な位置で与える。例) 90°から 45°反時計回りに動いてほしいときは、-45ではなく、45を関数に入力する。
</span><span style="color:#75715e"></span>
SoftwareSerial <span style="color:#a6e22e">Bluetooth</span><span style="color:#f92672">(</span>10<span style="color:#f92672">,</span> 11<span style="color:#f92672">);</span> <span style="color:#75715e">// Arduinoから見て10ピンがRX（受信）, 11ピンがTX（送信)になる。bluetoothモジュールのTXにはArduinoのRX(10)が、bluetoothモジュールのRXにはArduinoのTX(11)が接続されていれば良い。
</span><span style="color:#75715e"></span>
<span style="color:#75715e">/*入力された値が変わらないときに、前の値を維持するためのフラグ*/</span>
<span style="color:#66d9ef">int</span> flag <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span>
<span style="color:#66d9ef">char</span> old_input <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;C&#39;</span><span style="color:#f92672">;</span>

<span style="color:#66d9ef">void</span> <span style="color:#a6e22e">setup</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
  Bluetooth<span style="color:#f92672">.</span><span style="color:#a6e22e">begin</span><span style="color:#f92672">(</span>9600<span style="color:#f92672">);</span> <span style="color:#75715e">//シリアルポートを開いて、伝送速度を9600[bps] に設定
</span><span style="color:#75715e"></span>  Serial<span style="color:#f92672">.</span><span style="color:#a6e22e">begin</span><span style="color:#f92672">(</span>9600<span style="color:#f92672">);</span> <span style="color:#75715e">//シリアルモニタで確認用
</span><span style="color:#75715e"></span>  myservo<span style="color:#f92672">.</span><span style="color:#a6e22e">attach</span><span style="color:#f92672">(</span>9<span style="color:#f92672">);</span> <span style="color:#75715e">//サーボモータのPWM端子とArduinoの9番ピンを接続
</span><span style="color:#75715e"></span>  myesc<span style="color:#f92672">.</span><span style="color:#a6e22e">attach</span><span style="color:#f92672">(</span>6<span style="color:#f92672">);</span> <span style="color:#75715e">//ESCのPWM端子とArduinoの6番ピンを接続
</span><span style="color:#75715e"></span><span style="color:#f92672">}</span>

<span style="color:#66d9ef">void</span> <span style="color:#a6e22e">loop</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
  delay<span style="color:#f92672">(</span>10<span style="color:#f92672">);</span>
  <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>Bluetooth<span style="color:#f92672">.</span><span style="color:#a6e22e">available</span><span style="color:#f92672">())</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">char</span> input <span style="color:#f92672">=</span> Bluetooth<span style="color:#f92672">.</span><span style="color:#a6e22e">read</span><span style="color:#f92672">();</span> <span style="color:#75715e">//受信したテキストを変数inputに保存
</span><span style="color:#75715e"></span>    Serial<span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>input<span style="color:#f92672">);</span> <span style="color:#75715e">//受信したテキストをシリアルモニタに表示
</span><span style="color:#75715e"></span>
    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>input <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;A&#39;</span> <span style="color:#f92672">&amp;&amp;</span> flag <span style="color:#f92672">==</span> 0<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
      old_input <span style="color:#f92672">=</span> input<span style="color:#f92672">;</span>
      myservo<span style="color:#f92672">.</span><span style="color:#a6e22e">write</span><span style="color:#f92672">(</span>center_pos<span style="color:#f92672">,</span> mov_speed_ST<span style="color:#f92672">,</span> <span style="color:#66d9ef">true</span><span style="color:#f92672">);</span> <span style="color:#75715e">// ステアを中心(Center)に
</span><span style="color:#75715e"></span>      myesc<span style="color:#f92672">.</span><span style="color:#a6e22e">write</span><span style="color:#f92672">(</span>forward_max<span style="color:#f92672">,</span> mov_speed_TH<span style="color:#f92672">,</span> <span style="color:#66d9ef">true</span><span style="color:#f92672">);</span>  <span style="color:#75715e">//前進(Forward)
</span><span style="color:#75715e"></span>      flag <span style="color:#f92672">=</span> 1<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>input <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;B&#39;</span> <span style="color:#f92672">&amp;&amp;</span> flag <span style="color:#f92672">==</span> 0<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
      old_input <span style="color:#f92672">=</span> input<span style="color:#f92672">;</span>
      myservo<span style="color:#f92672">.</span><span style="color:#a6e22e">write</span><span style="color:#f92672">(</span>center_pos<span style="color:#f92672">,</span> mov_speed_ST<span style="color:#f92672">,</span> <span style="color:#66d9ef">true</span><span style="color:#f92672">);</span> <span style="color:#75715e">// ステアを中心(Center)に
</span><span style="color:#75715e"></span>      myesc<span style="color:#f92672">.</span><span style="color:#a6e22e">write</span><span style="color:#f92672">(</span>backward_max<span style="color:#f92672">,</span> mov_speed_TH<span style="color:#f92672">,</span> <span style="color:#66d9ef">true</span><span style="color:#f92672">);</span>  <span style="color:#75715e">//後退(Backward)
</span><span style="color:#75715e"></span>      flag <span style="color:#f92672">=</span> 1<span style="color:#f92672">;</span>

    <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>input <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;C&#39;</span> <span style="color:#f92672">&amp;&amp;</span> flag <span style="color:#f92672">==</span> 0<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
      old_input <span style="color:#f92672">=</span> input<span style="color:#f92672">;</span>
      myservo<span style="color:#f92672">.</span><span style="color:#a6e22e">write</span><span style="color:#f92672">(</span>center_pos<span style="color:#f92672">,</span> mov_speed_ST<span style="color:#f92672">,</span> <span style="color:#66d9ef">true</span><span style="color:#f92672">);</span> <span style="color:#75715e">// ステアを中心(Center)に
</span><span style="color:#75715e"></span>      myesc<span style="color:#f92672">.</span><span style="color:#a6e22e">write</span><span style="color:#f92672">(</span>neutral_pos<span style="color:#f92672">,</span> brake_speed<span style="color:#f92672">,</span> <span style="color:#66d9ef">true</span><span style="color:#f92672">);</span>  <span style="color:#75715e">//中立(Neutral)
</span><span style="color:#75715e"></span>      flag <span style="color:#f92672">=</span> 1<span style="color:#f92672">;</span>

    <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>input <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;D&#39;</span> <span style="color:#f92672">&amp;&amp;</span> flag <span style="color:#f92672">==</span> 0<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
      old_input <span style="color:#f92672">=</span> input<span style="color:#f92672">;</span>
      myservo<span style="color:#f92672">.</span><span style="color:#a6e22e">write</span><span style="color:#f92672">(</span>left_max<span style="color:#f92672">,</span> mov_speed_ST<span style="color:#f92672">,</span> <span style="color:#66d9ef">true</span><span style="color:#f92672">);</span> <span style="color:#75715e">// ステアを左(Left)に切る
</span><span style="color:#75715e"></span>      myesc<span style="color:#f92672">.</span><span style="color:#a6e22e">write</span><span style="color:#f92672">(</span>neutral_pos<span style="color:#f92672">,</span> brake_speed<span style="color:#f92672">,</span> <span style="color:#66d9ef">true</span><span style="color:#f92672">);</span>  <span style="color:#75715e">//中立(Neutral)
</span><span style="color:#75715e"></span>      flag <span style="color:#f92672">=</span> 1<span style="color:#f92672">;</span>

    <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>input <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;E&#39;</span> <span style="color:#f92672">&amp;&amp;</span> flag <span style="color:#f92672">==</span> 0<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
      old_input <span style="color:#f92672">=</span> input<span style="color:#f92672">;</span>
      myservo<span style="color:#f92672">.</span><span style="color:#a6e22e">write</span><span style="color:#f92672">(</span>right_max<span style="color:#f92672">,</span> mov_speed_ST<span style="color:#f92672">,</span> <span style="color:#66d9ef">true</span><span style="color:#f92672">);</span>  <span style="color:#75715e">//ステアを右(Right)に切る
</span><span style="color:#75715e"></span>      myesc<span style="color:#f92672">.</span><span style="color:#a6e22e">write</span><span style="color:#f92672">(</span>neutral_pos<span style="color:#f92672">,</span> brake_speed<span style="color:#f92672">,</span> <span style="color:#66d9ef">true</span><span style="color:#f92672">);</span>  <span style="color:#75715e">//中立(Neutral)
</span><span style="color:#75715e"></span>      flag <span style="color:#f92672">=</span> 1<span style="color:#f92672">;</span>

    <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>input <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;F&#39;</span> <span style="color:#f92672">&amp;&amp;</span> flag <span style="color:#f92672">==</span> 0<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
      old_input <span style="color:#f92672">=</span> input<span style="color:#f92672">;</span>
      myservo<span style="color:#f92672">.</span><span style="color:#a6e22e">write</span><span style="color:#f92672">(</span>left_max<span style="color:#f92672">,</span> mov_speed_ST<span style="color:#f92672">,</span> <span style="color:#66d9ef">true</span><span style="color:#f92672">);</span> <span style="color:#75715e">// ステアを左(Left)に切る
</span><span style="color:#75715e"></span>      myesc<span style="color:#f92672">.</span><span style="color:#a6e22e">write</span><span style="color:#f92672">(</span>forward_max<span style="color:#f92672">,</span> mov_speed_TH<span style="color:#f92672">,</span> <span style="color:#66d9ef">true</span><span style="color:#f92672">);</span>  <span style="color:#75715e">//前進(Forward)
</span><span style="color:#75715e"></span>      flag <span style="color:#f92672">=</span> 1<span style="color:#f92672">;</span>

    <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>input <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;G&#39;</span> <span style="color:#f92672">&amp;&amp;</span> flag <span style="color:#f92672">==</span> 0<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
      old_input <span style="color:#f92672">=</span> input<span style="color:#f92672">;</span>
      myservo<span style="color:#f92672">.</span><span style="color:#a6e22e">write</span><span style="color:#f92672">(</span>right_max<span style="color:#f92672">,</span> mov_speed_ST<span style="color:#f92672">,</span> <span style="color:#66d9ef">true</span><span style="color:#f92672">);</span>  <span style="color:#75715e">//ステアを右(Right)に切る
</span><span style="color:#75715e"></span>      myesc<span style="color:#f92672">.</span><span style="color:#a6e22e">write</span><span style="color:#f92672">(</span>forward_max<span style="color:#f92672">,</span> mov_speed_TH<span style="color:#f92672">,</span> <span style="color:#66d9ef">true</span><span style="color:#f92672">);</span>  <span style="color:#75715e">//前進(Forward)
</span><span style="color:#75715e"></span>      flag <span style="color:#f92672">=</span> 1<span style="color:#f92672">;</span>

    <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>input <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;H&#39;</span> <span style="color:#f92672">&amp;&amp;</span> flag <span style="color:#f92672">==</span> 0<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
      old_input <span style="color:#f92672">=</span> input<span style="color:#f92672">;</span>
      myservo<span style="color:#f92672">.</span><span style="color:#a6e22e">write</span><span style="color:#f92672">(</span>left_max<span style="color:#f92672">,</span> mov_speed_ST<span style="color:#f92672">,</span> <span style="color:#66d9ef">true</span><span style="color:#f92672">);</span> <span style="color:#75715e">// ステアを左(Left)に切る
</span><span style="color:#75715e"></span>      myesc<span style="color:#f92672">.</span><span style="color:#a6e22e">write</span><span style="color:#f92672">(</span>backward_max<span style="color:#f92672">,</span> mov_speed_TH<span style="color:#f92672">,</span> <span style="color:#66d9ef">true</span><span style="color:#f92672">);</span>  <span style="color:#75715e">//後退(Backward)
</span><span style="color:#75715e"></span>      flag <span style="color:#f92672">=</span> 1<span style="color:#f92672">;</span>

    <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>input <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;I&#39;</span> <span style="color:#f92672">&amp;&amp;</span> flag <span style="color:#f92672">==</span> 0<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
      old_input <span style="color:#f92672">=</span> input<span style="color:#f92672">;</span>
      myservo<span style="color:#f92672">.</span><span style="color:#a6e22e">write</span><span style="color:#f92672">(</span>right_max<span style="color:#f92672">,</span> mov_speed_ST<span style="color:#f92672">,</span> <span style="color:#66d9ef">true</span><span style="color:#f92672">);</span>  <span style="color:#75715e">//ステアを右(Right)に切る
</span><span style="color:#75715e"></span>      myesc<span style="color:#f92672">.</span><span style="color:#a6e22e">write</span><span style="color:#f92672">(</span>backward_max<span style="color:#f92672">,</span> mov_speed_TH<span style="color:#f92672">,</span> <span style="color:#66d9ef">true</span><span style="color:#f92672">);</span>  <span style="color:#75715e">//後退(Backward)
</span><span style="color:#75715e"></span>      flag <span style="color:#f92672">=</span> 1<span style="color:#f92672">;</span>

    <span style="color:#f92672">}</span><span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span><span style="color:#f92672">(</span>input <span style="color:#f92672">!=</span> old_input<span style="color:#f92672">){</span> 
         flag <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

  <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span></code></pre></div></p>
<h2 id="33--ver4-ver3の改良版">3.3. ◆ ver.4 ～ver.3の改良版～</h2>
<p>　ver.3 よりもアプリやプログラムをシンプルにしました。ver.4では4つ角のボタンは有効になっています。</p>
<p>　ver.3よりはちゃんと動くようになりましたが、タイムラグが起こるという課題は解決できませんでした。（解決できたら、回を改めて解決方法を掲載したいと思います）</p>
<h3 id="331-スマホアプリ">3.3.1. スマホアプリ</h3>
<p>　見た目ver.3と全く同じですが、タイマーを無くしてシンプルにしました。</p>
<p>　中身（ブロック）に関しては、ver.1と同じような感じです。</p>
<p>　ver.3まではbluetoothの接続処理が不安定だったので、MIT App InventorフォーラムにあったJuan_Antonioさんの投稿<sup id="fnref:1"><a href="#fn:1" class="footnote-ref" role="doc-noteref">1</a></sup>を参考に修正しました。</p>
<p>　ブロック右側の透明な部分（文字だけ浮いている部分）は、ブロックを無効にしている（テキストのプログラムで言うところのコメントアウト）だけです。</p>
  <div align="center">
  <figure><img src="UI4.png"
         alt="アプリ外観（デザイン編集タブ）"/>
</figure>

  </div>
  <div style="text-align: center;">
  ☝　アプリ外観（デザイン編集タブ）
  </div>
  <div align="center">
  <figure><img src="blocks4.png"
         alt="アプリの中身（ブロック編集タブ）"/>
</figure>

  </div>
  <div style="text-align: center;">
  ☝　アプリの中身（ブロック編集タブ）
  </div>
<h3 id="332-マイコンプログラム">3.3.2. マイコンプログラム</h3>
<p>　こちらもシンプルにしました。flagなどによる処理を無くしました。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#960050;background-color:#1e0010">#</span>include <span style="color:#f92672">&lt;</span>SoftwareSerial<span style="color:#f92672">.</span><span style="color:#a6e22e">h</span><span style="color:#f92672">&gt;</span>  <span style="color:#75715e">//Bluetoothの無線通信に使用
</span><span style="color:#75715e"></span><span style="color:#960050;background-color:#1e0010">#</span>include <span style="color:#f92672">&lt;</span>VarSpeedServo<span style="color:#f92672">.</span><span style="color:#a6e22e">h</span><span style="color:#f92672">&gt;</span>  <span style="color:#75715e">//サーボモータの制御に使用
</span><span style="color:#75715e"></span>VarSpeedServo myservo<span style="color:#f92672">;</span>    <span style="color:#75715e">// create servo object to control a servo
</span><span style="color:#75715e"></span>VarSpeedServo myesc<span style="color:#f92672">;</span>    <span style="color:#75715e">// create servo object to control a esc
</span><span style="color:#75715e"></span>
<span style="color:#75715e">/* ステアリングの設定 */</span>
<span style="color:#66d9ef">int</span> mov_speed_ST <span style="color:#f92672">=</span> 30<span style="color:#f92672">;</span> <span style="color:#75715e">//ステア移動速度
</span><span style="color:#75715e"></span><span style="color:#66d9ef">int</span> center_pos <span style="color:#f92672">=</span> 90<span style="color:#f92672">;</span> <span style="color:#75715e">//ステア中心位置 [サーボモータの中心位置 (90°)]
</span><span style="color:#75715e"></span><span style="color:#66d9ef">int</span> left_DR <span style="color:#f92672">=</span> 20<span style="color:#f92672">;</span> <span style="color:#75715e">//左位置 [中心位置より反時計回りに20°回転した位置]
</span><span style="color:#75715e"></span><span style="color:#66d9ef">int</span> right_DR <span style="color:#f92672">=</span> 25<span style="color:#f92672">;</span> <span style="color:#75715e">//右位置 [中心位置より時計回りに25°回転した位置]
</span><span style="color:#75715e"></span><span style="color:#66d9ef">int</span> left_max <span style="color:#f92672">=</span> center_pos <span style="color:#f92672">-</span> left_DR<span style="color:#f92672">;</span> <span style="color:#75715e">//左の最大切れ角
</span><span style="color:#75715e"></span><span style="color:#66d9ef">int</span> right_max <span style="color:#f92672">=</span> center_pos <span style="color:#f92672">+</span> right_DR<span style="color:#f92672">;</span> <span style="color:#75715e">//右の最大切れ角
</span><span style="color:#75715e"></span>
<span style="color:#75715e">/* スロットルの設定 */</span>
<span style="color:#66d9ef">int</span> mov_speed_TH <span style="color:#f92672">=</span> 5<span style="color:#f92672">;</span> <span style="color:#75715e">//スロットル移動速度
</span><span style="color:#75715e"></span><span style="color:#66d9ef">int</span> brake_speed <span style="color:#f92672">=</span> 100<span style="color:#f92672">;</span> <span style="color:#75715e">//ブレーキ速度
</span><span style="color:#75715e"></span><span style="color:#66d9ef">int</span> neutral_pos <span style="color:#f92672">=</span> 91<span style="color:#f92672">;</span> <span style="color:#75715e">//中立位置 [スロットルの中立位置 (90) ※ESCの設定によってずれがあるので、前後に走行しないよう値を調整する。ESC側を90で中立になるよう設定してもよい。]
</span><span style="color:#75715e"></span><span style="color:#66d9ef">int</span> forward_DR <span style="color:#f92672">=</span> 20<span style="color:#f92672">;</span> <span style="color:#75715e">//前進位置
</span><span style="color:#75715e"></span><span style="color:#66d9ef">int</span> backward_DR <span style="color:#f92672">=</span> 20<span style="color:#f92672">;</span> <span style="color:#75715e">//バック位置
</span><span style="color:#75715e"></span><span style="color:#66d9ef">int</span> forward_max <span style="color:#f92672">=</span> neutral_pos <span style="color:#f92672">+</span> forward_DR<span style="color:#f92672">;</span> <span style="color:#75715e">//前進の最大位置
</span><span style="color:#75715e"></span><span style="color:#66d9ef">int</span> backward_max <span style="color:#f92672">=</span> neutral_pos <span style="color:#f92672">-</span> backward_DR<span style="color:#f92672">;</span> <span style="color:#75715e">//バックの最大位置
</span><span style="color:#75715e"></span>
<span style="color:#75715e">//速度(mov_speed_ST,mov_speed_TH)は 1~255 の範囲で与える。（0にすると最大速度で移動）
</span><span style="color:#75715e">//スロットル、サーボモータの値(pos)の範囲は、 0≦ pos ≦180 で与える。
</span><span style="color:#75715e">//myservo.write 関数には回転角を絶対的な位置で与える。例) 90°から 45°反時計回りに動いてほしいときは、-45ではなく、45を関数に入力する。
</span><span style="color:#75715e"></span>
SoftwareSerial <span style="color:#a6e22e">Bluetooth</span><span style="color:#f92672">(</span>10<span style="color:#f92672">,</span> 11<span style="color:#f92672">);</span> <span style="color:#75715e">// Arduinoから見て10ピンがRX（受信）, 11ピンがTX（送信)になる。bluetoothモジュールのTXにはArduinoのRX(10)が、bluetoothモジュールのRXにはArduinoのTX(11)が接続されていれば良い。
</span><span style="color:#75715e"></span>
<span style="color:#66d9ef">void</span> <span style="color:#a6e22e">setup</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
  Bluetooth<span style="color:#f92672">.</span><span style="color:#a6e22e">begin</span><span style="color:#f92672">(</span>9600<span style="color:#f92672">);</span> <span style="color:#75715e">//シリアルポートを開いて、伝送速度を9600[bps] に設定
</span><span style="color:#75715e"></span>  Serial<span style="color:#f92672">.</span><span style="color:#a6e22e">begin</span><span style="color:#f92672">(</span>9600<span style="color:#f92672">);</span> <span style="color:#75715e">//シリアルモニタで確認用
</span><span style="color:#75715e"></span>  myservo<span style="color:#f92672">.</span><span style="color:#a6e22e">attach</span><span style="color:#f92672">(</span>9<span style="color:#f92672">);</span> <span style="color:#75715e">//サーボモータのPWM端子とArduinoの9番ピンを接続
</span><span style="color:#75715e"></span>  myesc<span style="color:#f92672">.</span><span style="color:#a6e22e">attach</span><span style="color:#f92672">(</span>6<span style="color:#f92672">);</span> <span style="color:#75715e">//ESCのPWM端子とArduinoの6番ピンを接続
</span><span style="color:#75715e"></span><span style="color:#f92672">}</span>

<span style="color:#66d9ef">void</span> <span style="color:#a6e22e">loop</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>

  <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>Bluetooth<span style="color:#f92672">.</span><span style="color:#a6e22e">available</span><span style="color:#f92672">())</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">char</span> input <span style="color:#f92672">=</span> Bluetooth<span style="color:#f92672">.</span><span style="color:#a6e22e">read</span><span style="color:#f92672">();</span> <span style="color:#75715e">//受信したテキストを変数inputに保存
</span><span style="color:#75715e"></span>    Serial<span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>input<span style="color:#f92672">);</span> <span style="color:#75715e">//受信したテキストをシリアルモニタに表示
</span><span style="color:#75715e"></span>
    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>input <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;A&#39;</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
      myservo<span style="color:#f92672">.</span><span style="color:#a6e22e">write</span><span style="color:#f92672">(</span>center_pos<span style="color:#f92672">,</span> mov_speed_ST<span style="color:#f92672">,</span> <span style="color:#66d9ef">true</span><span style="color:#f92672">);</span> <span style="color:#75715e">// ステアを中心(Center)に
</span><span style="color:#75715e"></span>      myesc<span style="color:#f92672">.</span><span style="color:#a6e22e">write</span><span style="color:#f92672">(</span>forward_max<span style="color:#f92672">,</span> mov_speed_TH<span style="color:#f92672">,</span> <span style="color:#66d9ef">true</span><span style="color:#f92672">);</span>  <span style="color:#75715e">//前進(Forward)
</span><span style="color:#75715e"></span>    <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>input <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;B&#39;</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
      myservo<span style="color:#f92672">.</span><span style="color:#a6e22e">write</span><span style="color:#f92672">(</span>center_pos<span style="color:#f92672">,</span> mov_speed_ST<span style="color:#f92672">,</span> <span style="color:#66d9ef">true</span><span style="color:#f92672">);</span> <span style="color:#75715e">// ステアを中心(Center)に
</span><span style="color:#75715e"></span>      myesc<span style="color:#f92672">.</span><span style="color:#a6e22e">write</span><span style="color:#f92672">(</span>backward_max<span style="color:#f92672">,</span> mov_speed_TH<span style="color:#f92672">,</span> <span style="color:#66d9ef">true</span><span style="color:#f92672">);</span>  <span style="color:#75715e">//後退(Backward)
</span><span style="color:#75715e"></span>    <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>input <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;C&#39;</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
      myservo<span style="color:#f92672">.</span><span style="color:#a6e22e">write</span><span style="color:#f92672">(</span>center_pos<span style="color:#f92672">,</span> mov_speed_ST<span style="color:#f92672">,</span> <span style="color:#66d9ef">true</span><span style="color:#f92672">);</span> <span style="color:#75715e">// ステアを中心(Center)に
</span><span style="color:#75715e"></span>      myesc<span style="color:#f92672">.</span><span style="color:#a6e22e">write</span><span style="color:#f92672">(</span>neutral_pos<span style="color:#f92672">,</span> brake_speed<span style="color:#f92672">,</span> <span style="color:#66d9ef">true</span><span style="color:#f92672">);</span>  <span style="color:#75715e">//中立(Neutral)
</span><span style="color:#75715e"></span>    <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>input <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;D&#39;</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
      myservo<span style="color:#f92672">.</span><span style="color:#a6e22e">write</span><span style="color:#f92672">(</span>left_max<span style="color:#f92672">,</span> mov_speed_ST<span style="color:#f92672">,</span> <span style="color:#66d9ef">true</span><span style="color:#f92672">);</span> <span style="color:#75715e">// ステアを左(Left)に切る
</span><span style="color:#75715e"></span>      myesc<span style="color:#f92672">.</span><span style="color:#a6e22e">write</span><span style="color:#f92672">(</span>neutral_pos<span style="color:#f92672">,</span> brake_speed<span style="color:#f92672">,</span> <span style="color:#66d9ef">true</span><span style="color:#f92672">);</span>  <span style="color:#75715e">//中立(Neutral)
</span><span style="color:#75715e"></span>    <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>input <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;E&#39;</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
      myservo<span style="color:#f92672">.</span><span style="color:#a6e22e">write</span><span style="color:#f92672">(</span>right_max<span style="color:#f92672">,</span> mov_speed_ST<span style="color:#f92672">,</span> <span style="color:#66d9ef">true</span><span style="color:#f92672">);</span>  <span style="color:#75715e">//ステアを右(Right)に切る
</span><span style="color:#75715e"></span>      myesc<span style="color:#f92672">.</span><span style="color:#a6e22e">write</span><span style="color:#f92672">(</span>neutral_pos<span style="color:#f92672">,</span> brake_speed<span style="color:#f92672">,</span> <span style="color:#66d9ef">true</span><span style="color:#f92672">);</span>  <span style="color:#75715e">//中立(Neutral)
</span><span style="color:#75715e"></span>    <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>input <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;F&#39;</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
      myservo<span style="color:#f92672">.</span><span style="color:#a6e22e">write</span><span style="color:#f92672">(</span>left_max<span style="color:#f92672">,</span> mov_speed_ST<span style="color:#f92672">,</span> <span style="color:#66d9ef">true</span><span style="color:#f92672">);</span> <span style="color:#75715e">// ステアを左(Left)に切る
</span><span style="color:#75715e"></span>      myesc<span style="color:#f92672">.</span><span style="color:#a6e22e">write</span><span style="color:#f92672">(</span>forward_max<span style="color:#f92672">,</span> mov_speed_TH<span style="color:#f92672">,</span> <span style="color:#66d9ef">true</span><span style="color:#f92672">);</span>  <span style="color:#75715e">//前進(Forward)
</span><span style="color:#75715e"></span>    <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>input <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;G&#39;</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
      myservo<span style="color:#f92672">.</span><span style="color:#a6e22e">write</span><span style="color:#f92672">(</span>right_max<span style="color:#f92672">,</span> mov_speed_ST<span style="color:#f92672">,</span> <span style="color:#66d9ef">true</span><span style="color:#f92672">);</span>  <span style="color:#75715e">//ステアを右(Right)に切る
</span><span style="color:#75715e"></span>      myesc<span style="color:#f92672">.</span><span style="color:#a6e22e">write</span><span style="color:#f92672">(</span>forward_max<span style="color:#f92672">,</span> mov_speed_TH<span style="color:#f92672">,</span> <span style="color:#66d9ef">true</span><span style="color:#f92672">);</span>  <span style="color:#75715e">//前進(Forward)
</span><span style="color:#75715e"></span>    <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>input <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;H&#39;</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
      myservo<span style="color:#f92672">.</span><span style="color:#a6e22e">write</span><span style="color:#f92672">(</span>left_max<span style="color:#f92672">,</span> mov_speed_ST<span style="color:#f92672">,</span> <span style="color:#66d9ef">true</span><span style="color:#f92672">);</span> <span style="color:#75715e">// ステアを左(Left)に切る
</span><span style="color:#75715e"></span>      myesc<span style="color:#f92672">.</span><span style="color:#a6e22e">write</span><span style="color:#f92672">(</span>backward_max<span style="color:#f92672">,</span> mov_speed_TH<span style="color:#f92672">,</span> <span style="color:#66d9ef">true</span><span style="color:#f92672">);</span>  <span style="color:#75715e">//後退(Backward)
</span><span style="color:#75715e"></span>    <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>input <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;I&#39;</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
      myservo<span style="color:#f92672">.</span><span style="color:#a6e22e">write</span><span style="color:#f92672">(</span>right_max<span style="color:#f92672">,</span> mov_speed_ST<span style="color:#f92672">,</span> <span style="color:#66d9ef">true</span><span style="color:#f92672">);</span>  <span style="color:#75715e">//ステアを右(Right)に切る
</span><span style="color:#75715e"></span>      myesc<span style="color:#f92672">.</span><span style="color:#a6e22e">write</span><span style="color:#f92672">(</span>backward_max<span style="color:#f92672">,</span> mov_speed_TH<span style="color:#f92672">,</span> <span style="color:#66d9ef">true</span><span style="color:#f92672">);</span>  <span style="color:#75715e">//後退(Backward)
</span><span style="color:#75715e"></span>    <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
    <span style="color:#f92672">}</span>

  <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span></code></pre></div>
<h1 id="4-課題点と今後に向けて">4. 課題点と今後に向けて</h1>
<p>　現状では、bluetooth通信が「2秒間送受信→2秒間お休み→2秒間送受信→&hellip;（繰り返し）」という謎現象に悩まされています。</p>
<p>　Arduinoのフォーラム<sup id="fnref:2"><a href="#fn:2" class="footnote-ref" role="doc-noteref">2</a></sup>で同じような悩みを抱えている人がいたので、問題解決の参考になりそうです。</p>
<p>　今回はとりあえずテキストでラジコンを操作するのをやめて、ボタンで操作できるようになって良かったです！　それではまた！</p>
<h1 id="5-サンプルファイル">5. サンプルファイル</h1>
<p>　作成したアプリのデータはこちらになります。改良するなど自由に使ってください。</p>
<p><strong>～ MIT App Inventorプロジェクトのファイル(.aia) ～</strong></p>
<ul>
<li><a href="Happy_RC_Driver_1.aia">Happy_RC_Driver_1.aia</a></li>
<li><a href="Happy_RC_Driver_2.aia">Happy_RC_Driver_2.aia</a></li>
<li><a href="Happy_RC_Driver_3.aia">Happy_RC_Driver_3.aia</a></li>
<li><a href="Happy_RC_Driver_4.aia">Happy_RC_Driver_4.aia</a></li>
</ul>
<p><strong>～ Androidアプリのファイル(.apk) ～</strong></p>
<ul>
<li><a href="Happy_RC_Driver_1.apk">Happy_RC_Driver_1.apk</a></li>
<li><a href="Happy_RC_Driver_2.apk">Happy_RC_Driver_2.apk</a></li>
<li><a href="Happy_RC_Driver_3.apk">Happy_RC_Driver_3.apk</a></li>
<li><a href="Happy_RC_Driver_4.apk">Happy_RC_Driver_4.apk</a></li>
</ul>
<h1 id="6-参考資料">6. 参考資料</h1>
<section class="footnotes" role="doc-endnotes">
<hr>
<ol>
<li id="fn:1" role="doc-endnote">
<p>MIT App Inventor「Bluetooth HC-06. Arduino. Send. Receive. Send text file. Multitouch. Image」、(<a href="https://community.appinventor.mit.edu/t/bluetooth-hc-06-arduino-send-receive-send-text-file-multitouch-image/9518">https://community.appinventor.mit.edu/t/bluetooth-hc-06-arduino-send-receive-send-text-file-multitouch-image/9518</a>)&#160;<a href="#fnref:1" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
<li id="fn:2" role="doc-endnote">
<p>Arduino FORUM「Bluetooth HC-05 command delay」、(<a href="https://forum.arduino.cc/t/bluetooth-hc-05-command-delay/916823">https://forum.arduino.cc/t/bluetooth-hc-05-command-delay/916823</a>)&#160;<a href="#fnref:2" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
</ol>
</section>


    </main><footer>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
  <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      TeX: { equationNumbers: {autoNumber: "AMS"} },
      tex2jax: {
        inlineMath: [['$','$']]
      }
    });
  </script>
  
  
  
  
  <div class="prev-next">
    <a
      class="active icon"
      href="/Happy_RC.github.io/2022/08/16/"
      aria-label="Previous Article"
      ><i class="bi bi-arrow-left-circle-fill"></i
    ></a>
    <a
      class="active icon"
      href="/Happy_RC.github.io/2022/08/30/"
      aria-label="Next Article"
      ><i class="bi bi-arrow-right-circle-fill"></i
    ></a>
  </div>
  </div>
  
  <div class="footer shadow round-corner">
    
    <div class="grid-container">
      <div class="footer-recent-posts">
        <h6>Recent Posts</h6>
        <ol>
          
          <li><a href="https://tomokiikegami.github.io/Happy_RC.github.io/2022/10/09/">Bluetooth モジュールでRCサーボ・ESCを制御したい [第8回-ターボ機能を追加]</a></li>
          
          <li><a href="https://tomokiikegami.github.io/Happy_RC.github.io/2022/09/29/">Bluetooth モジュールでRCサーボ・ESCを制御したい [第7回-回路をシンプル＆コンパクトに]</a></li>
          
          <li><a href="https://tomokiikegami.github.io/Happy_RC.github.io/2022/09/27/">Bluetooth モジュールでRCサーボ・ESCを制御したい [第6回-動きを滑らかに]</a></li>
          
          <li><a href="https://tomokiikegami.github.io/Happy_RC.github.io/2022/09/12/">GS02のタイヤを浮かせたい！</a></li>
          
          <li><a href="https://tomokiikegami.github.io/Happy_RC.github.io/2022/08/30/">Bluetooth モジュールでRCサーボ・ESCを制御したい [第5回-安全性の向上]</a></li>
          
          <li><a href="https://tomokiikegami.github.io/Happy_RC.github.io/2022/08/20/">Bluetooth モジュールでRCサーボ・ESCを制御したい [第4回-操作性の向上]</a></li>
          
          <li><a href="https://tomokiikegami.github.io/Happy_RC.github.io/2022/08/16/">LibreOffice Draw を使って教科書みたいなカッコイイ図を作る！</a></li>
          
        </ol>
        <a href="/Happy_RC.github.io/archive">...ALL POSTS</a>
        <hr class="mobile white-hr" />
      </div>
      <div>
        <h6>Sections</h6>
<div class="section-container">
  
  
  <a class="section" href="https://tomokiikegami.github.io/Happy_RC.github.io/post/" aria-label="site sections"
    >Posts</a
  >
  
  
  
  
  
  
</div>

        









<h6>
  Tags
</h6>

<div class="taxa-container">
  
  
    <a class="taxa" href="https://tomokiikegami.github.io/Happy_RC.github.io/tags/arduino/">Arduino</a>
  
  
    <a class="taxa" href="https://tomokiikegami.github.io/Happy_RC.github.io/tags/%E3%82%B5%E3%83%BC%E3%83%9C/">サーボ</a>
  
  
    <a class="taxa" href="https://tomokiikegami.github.io/Happy_RC.github.io/tags/%E7%84%A1%E7%B7%9A%E9%80%9A%E4%BF%A1/">無線通信</a>
  
  
    <a class="taxa" href="https://tomokiikegami.github.io/Happy_RC.github.io/tags/esc/">ESC</a>
  
  
    <a class="taxa" href="https://tomokiikegami.github.io/Happy_RC.github.io/tags/freecad/">FreeCAD</a>
  
  
    <a class="taxa" href="https://tomokiikegami.github.io/Happy_RC.github.io/tags/3d%E3%83%A2%E3%83%87%E3%83%AA%E3%83%B3%E3%82%B0/">3Dモデリング</a>
  
  
    <a class="taxa" href="https://tomokiikegami.github.io/Happy_RC.github.io/tags/mit-app-inventor/">MIT App Inventor</a>
  
  
    <a class="taxa" href="https://tomokiikegami.github.io/Happy_RC.github.io/tags/%E8%87%AA%E4%BD%9C%E3%82%A2%E3%83%97%E3%83%AA/">自作アプリ</a>
  
  
    <a class="taxa" href="https://tomokiikegami.github.io/Happy_RC.github.io/tags/%E6%A9%9F%E6%A2%B0%E8%A8%AD%E8%A8%88/">機械設計</a>
  
  
    <a class="taxa" href="https://tomokiikegami.github.io/Happy_RC.github.io/tags/3d%E3%83%97%E3%83%AA%E3%83%B3%E3%82%BF/">3Dプリンタ</a>
  
  
    <a class="taxa" href="https://tomokiikegami.github.io/Happy_RC.github.io/tags/%E3%82%AE%E3%82%A2/">ギア</a>
  
  
    <a class="taxa" href="https://tomokiikegami.github.io/Happy_RC.github.io/tags/ultimaker-cura/">Ultimaker Cura</a>
  
  
    <a class="taxa" href="https://tomokiikegami.github.io/Happy_RC.github.io/tags/html%E3%82%BF%E3%82%B0/">htmlタグ</a>
  
  
    <a class="taxa" href="https://tomokiikegami.github.io/Happy_RC.github.io/tags/hugo/">hugo</a>
  
  
    <a class="taxa" href="https://tomokiikegami.github.io/Happy_RC.github.io/tags/libreoffice-draw/">LibreOffice Draw</a>
  
  
    <a class="taxa" href="https://tomokiikegami.github.io/Happy_RC.github.io/tags/word/">Word</a>
  
  
    <a class="taxa" href="https://tomokiikegami.github.io/Happy_RC.github.io/tags/%E3%83%9C%E3%83%87%E3%82%A3%E5%A1%97%E8%A3%85/">ボディ塗装</a>
  
  
    <a class="taxa" href="https://tomokiikegami.github.io/Happy_RC.github.io/tags/%E5%9B%B3%E3%81%AE%E4%BD%9C%E6%88%90/">図の作成</a>
  
  
    <a class="taxa" href="https://tomokiikegami.github.io/Happy_RC.github.io/tags/%E6%96%87%E5%AD%97%E8%A3%85%E9%A3%BE/">文字装飾</a>
  
</div>


<h6>
  Categories
</h6>

<div class="taxa-container">
  
  
    <a class="taxa" href="https://tomokiikegami.github.io/Happy_RC.github.io/categories/%E3%83%A9%E3%82%B8%E3%82%B3%E3%83%B3/">ラジコン</a>
  
  
    <a class="taxa" href="https://tomokiikegami.github.io/Happy_RC.github.io/categories/%E5%82%99%E5%BF%98%E9%8C%B2/">備忘録</a>
  
</div>


        <hr class="mobile white-hr" />
      </div>
    </div>
    
    <div class="footer-info-text">
      <p>
        
        <span>2022</span>
        <span>Tomoki Ikegami.</span>
        <span>I hope to enjoy your RC Life.</span>
      </p>
      <p>
        <a href="https://github.com/urjaacharya/redgood">redgood</a>
        by
        <a
          href="https://www.urjaacharya.com/"
          aria-label="link to urja acharya site"
        >urja acharya</a>
      </p>
    </div>
    <div style="text-align: right; margin-bottom: 0.25em; font-size: 1.2em">
      <a class="primary-icon to-top" href="#" aria-label="navigate to top">
        <i class="bi bi-arrow-up-circle-fill"></i>
      </a>
    </div>
  </div>
</footer>
</body>
</html>
